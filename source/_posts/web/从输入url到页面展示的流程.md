---
title: 浏览器从输入url到页面展示的过程
category: web
date: 2019/12/13
---

**前言**
其实这个过程是很复杂的，如果细究每一步，都会牵扯到很多知识点，并不是一两篇文章就能说清楚的，所以本篇文章只介绍一个大概流程。

**大概流程如下**

1. 在浏览器地址栏输入 url 并按下回车
2. 浏览器解析 DNS 为 IP(如果直接输入 ip 的话，这一步省略)
3. 浏览器通过 url 向服务器发送 http 请求
4. 服务端收到请求，并返回响应的资源
5. 浏览器收到响应，并解析二进制数据为 html，并展示在页面

**输入地址**
这个比较简单，就不做说明。

**DNS 解析**
浏览器拿到 url 后，会对 url 中的域名进行解析。
首先，浏览器会从自身 DNS 缓存中查找 DNS 缓存，如果找到的话返回对应域名的 ip 地址。(浏览器的缓存时间是浏览器自身定义的，有些可以更改，比如 FF，默认缓存时间是 60s) 。
如果浏览器本身缓存中没有找到，接着浏览器会查看系统硬盘的 host 文件，看看其中有没有和这个域名对应的规则，如果有的话则使用 host 文件里对应的 ip。
如果本地文件也没有，浏览器会发送一个请求到本地 DNS 服务器(本地 DNS 服务器一般都是你的网络接入服务器商提供，比如中国电信，中国移动) 。DNS 服务器也要进行查找。
当 DNS 服务器把查到的 ip 返回给浏览器时，浏览器会把这个域名-ip 映射关系缓存。

**请求资源**
解析出 ip 地址后，浏览器会根据 ip 向指定服务器发送 http 请求。
首先浏览器会以一个随机端口(1024 和 65535 之间)端口向服务器发起 tcp 请求连接。
tcp 连接建立后，浏览器向服务器发送一个 http 请求，正式请求资源。

**服务器处理请求**
服务器收到请求后，会根据 url 将服务器上对应的资源返回给浏览器。

**页面展示**
浏览器收到响应后，会解析数据，生成页面，并展示。
