---
title: get与post的区别
category: http
tag: 网络
date: 2019/4/6
---

**前言**

> 首先，不管是 get 还是 post，都是 http 请求方法中的一种，都是用来数据传输。如果我们从网上来搜索它们的区别，比如（w3c）等，一般会得到如下答案：

-   get 用来获取数据，post 用来提交数据。
-   get 请求参数通过 querystring 拼接在 url 后 ，post 请求参数放在请求体。
-   get 提交表单不安全，因为表单数据拼接在 url 后，而 get 请求是可以被缓存得，别人可以通过浏览器记录查看表单数据；post 请求放在请求体且不会被缓存。
-   get 请求请求数据长度有限，post 请求的数据更大。
-   get 方式只能支持 ASCII 字符，向服务器传的中文字符可能会乱码，post 支持标准字符集，可以正确传递中文字符。

**本质分析**

> 对于上面的答案，从 RPC 规范的角度来看，确实是没问题，但是这些只是一些使用现象上的区别，关于它们的本质，应该从如下几个方面来看。

-   **用途问题，get 获取数据，post 请求数据**
    这个问题我们可以从两个方面看，一个是浏览器的请求，另一个是 XHR 请求。
    在 http 协议被设计的最初之时，XHR 还没有出现，get 确实是被用来获取数据，比如请求服务器一个 html 页面。而 post 则是用来提交 html 中的表单（当然 get 也可以提交）。

    从 XHR 的角度来看，我们将它作为接口传输协议的场景，开发者对这些请求的行为有 100%的控制权，比如，你可以通过 post 来获取数据，get 来提交数据，这并没有问题，只要前后端定义好就行。

-   **关于请求数据长度的问题**
    get 请求数据长度有限，并不是 get 本身的限制，而是 url 长度的限制，是浏览器和服务器对 url 长度的限制。理论上来说，只要满足 url 结构，长度可以是无限的，但是不同浏览器对 url 的长度做了不同限制。

-   **关于安全问题**
    不管是 get 还是 post 都是不安全的，因为 http 采用的是明文传输，每个请求都可能在某个链路上被人劫持，获取数据，这完全不是一个“是否容易在浏览器地址栏上或者浏览器记录里看到“的问题。
    如果要解决这个问题，我们应该采用 https 协议。

-   **url 编码问题**
    上面说的 get 只支持 ASCII 编码，post 支持任意编码，是只的 url 用的什么编码和请求体用的什么编码。
    实际上规范中 url 只能使用[a-zA-Z0-9$-_.+!*'(),]字符串，这仅仅是 ASCII 编码的一个子集，它们是可以不经过编码直接在 http url 中使用。

    实际情况中，我们是可以在 url 中使用中文，是因为浏览器会对 url 进行 url 编码，url 编码会对除上述子集外的字符串进行编码，使用一个`%`加两个表示字符 ASCII 码的十六进制值。

**总结**

> 不管是 get 还是 post，或者是 put,delete 等等，都是 http 请求方法中的一种，都是基于 TCP/IP 协议栈上层的，本质上没有区别，只是根据语义或者规范，客户端和服务端的一种约定，只要客户端和服务端相互认同，就能工作。在常规情况下，我们应该尽量按照规范去做，这样会避免很多问题，同时语义化更强。比如 RESTful 风格 api。但是我们也不能将思路限制死，应该根据合适的场景选择合适的方案。
> Elastic Search 的\_search 接口使用 GET，却用 body 来表达查询，因为查询很复杂，用 querystring 很麻烦，必须用 json 格式才舒服，在请求体用 json 编码更加容易，不用折腾 percent encoding。
